<!doctype html>
<html>

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">

  <title>순풋</title>
  
  <style>
    @media screen and (min-width: 481px) {
      header {
        width: 100%;
        height: 300px;
        margin: 0;
        padding: 0;
        border: 0;
        display: grid;
        grid-template-rows: auto auto;
      }
      .menubar {
        bottom: 10px;
        display: grid;
        grid-template-columns: auto auto auto auto;
        justify-content: center;
        align-items: center;
        padding: 20px 0;
        margin-bottom: 20px;
        height: 100px;
      }
  
      .menubar a {
        text-decoration: none;
        color: black;
        font-weight: bold;
        margin: 0 200px;
        display: grid;
        grid-template-rows: auto auto;
        place-items: center;
      }
  
      .menubar img {
        width: 60px;
        height: 60px;
      }
  
      .menuname {
        margin-top: 10px;
      }
  
      .list-container {
        width: 60%;
        height: 600px;
        border: 1px solid #ced4da;
        color: #838589;
        border-radius: 10px;
        box-shadow: 0 0 3px 0 rgb(172, 170, 170);
        /* display: flex; */
        justify-content: center;
        align-items: center;
        font-size: 20px;
        overflow-y: scroll;
        margin: 10px auto;
        padding: 0;
      }
      .list-container::-webkit-scrollbar {
      display: none;
      }
  
      .list-item {
        width: 95%;
        display: flex;
        justify-content: space-between;
        border: 1px solid #ced4da;
        color: #838589;
        border-radius: 10px;
        box-shadow: 0 0 3px 0 rgb(172, 170, 170);
        margin: 10px auto;
        padding: 10px;
      }
      .list-wrap {
        display: grid;
        grid-template-rows: 1fr 1fr;
        grid-gap: 10px;
        border: 1px solid #ced4da;
        color: #838589;
        border-radius: 10px;
        box-shadow: 0 0 3px 0 rgb(172, 170, 170);
        margin: 10px 10px;
        padding: 10px;
  
      }
      .list-item-success{
        display: flex;
        justify-content: space-between;
  
      }
      .title {
        color: black;
        font-weight: bold;
      }
  
      .content {
        color: black;
      }
  
      .detail {
        font-size: 16px;
        color: #545658;
      }
  
      .btn_wait {
        width: 120px;
        height: 30px;
        border: 0;
        background-color: rgb(66, 66, 236);
        font-size: 18px;
        font-weight: bold;
        color: white;
        border-radius: 10px;
        padding: 3px;
      }
  
      .btn_fail {
        width: 120px;
        height: 30px;
        border: 0;
        background-color: red;
        font-size: 18px;
        font-weight: bold;
        color: white;
        border-radius: 10px;
        padding: 3px;
      }
  
      .btn_complete {
        width: 120px;
        height: 30px;
        border: 0;
        background-color: #5da034;
        font-size: 18px;
        font-weight: bold;
        color: white;
        border-radius: 10px;
        padding: 3px;
      }
      .accept_btn{
        width: 120px;
        height: 30px;
        border: 0;
        background-color: #5da034;
        font-size: 18px;
        font-weight: bold;
        color: white;
        border-radius: 10px;
        padding: 3px;
      }
      .refuse_btn{
        width: 120px;
        height: 30px;
        border: 0;
        background-color: #5da034;
        font-size: 18px;
        font-weight: bold;
        color: white;
        border-radius: 10px;
        padding: 3px;
      }
      .score_button {
        width: fit-content;
        height: fit-content;
        border: 1px solid #ced4da;
        padding: 10px;
        background-color: white;
        font-size: 15px;
      }
      #main-title {
      width: 80%;
      color: black;
      margin: 30px auto;
      display: flex;
      justify-content: center;
      font-size:x-large;
      font-weight: bold;
    }
      #star {
        display: flex;
      }
  
      .star {
        font-size: 2rem;
        margin: 10px 0;
        cursor: pointer;
      }
  
      .star:not(.on) {
        color: #ccc;
      }
  
      .star.on {
        color: orange;
      }
      #main-container {
        width: 60%;
        margin: 0 auto;
        border: 1px solid silver;
        border-radius: 20px;
        box-shadow: 0 0 3px 0 rgb(172, 170, 170);
    }
      .box_line{
            margin: 0 auto;
            overflow-y: scroll;
        }
        .box_line::-webkit-scrollbar {
            display: none;
        }

        .head_box{
            width: 60%;
            height: fit-content;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #listhead{
            width: 100%;
            display: grid;
            grid-template-columns: 1fr 3fr 1fr;
            grid-gap: 10px;
            margin-top: 10px;
            margin-bottom: 10px;
        }
        #titleBox{
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: large;
            font-weight: bold;
        }
        .info_box{
            display: grid;
            grid-template-columns: 1fr 3fr 1fr;
            grid-gap: 10px;
            margin: 0 auto;
            width: 100%;
            border: 1px solid silver;
            border-top: none;
            border-right: none;
            border-left: none;
            padding-top: 10px;
            padding-bottom: 10px;
        }
        .main_info{
            margin: auto auto;
        }
        #art_detail {
            display: grid;
            grid-template-rows: 1fr 1fr 1fr;
            grid-gap: 5px;
        }
        .sub_info{
            font-size: 12px;
            color: #727F88;
            margin-top: 3px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            grid-gap: 5px;
            align-items: center;
            justify-content: flex-start;
            flex-wrap: wrap;
        }
        .wait {
            font-weight: bold;
            color: green;
        }
        .complete {
            font-weight: bold;
            color: blue;
        }
        .fail {
            font-weight: bold;
            color: red;
        }
      footer {
        width: 100%;
        height: 300px;
        margin: 0 auto;
        background-color: #282B33;
      }
    }
    </style>
</head>

<body>
  <header id="header">
    <%- include('nav.html') %>
      <div class="menubar" id="menubar">
        <a href="/board">
          <img src="public/imgs/ball.png" alt="전체 매치">
          <p class="menuname">전체 매치</p>
        </a>
        <a href="/boardinput">
          <img src="public/imgs/write.png" alt="매치등록">
          <p class="menuname">매치 등록</p>
        </a>
        <a href="/">
          <img src="public/imgs/notification.png" alt="공지사항">
          <p class="menuname">공지사항</p>
        </a>
      </div>
    </header>
    <hr style="height: 1px; background: #ccc;">

    <main>
      <div id="main-title"> 초대받은 매치</div>
      <div>
        <div id="main-container">
          <div id="listhead">
            <div id="titleBox"><span>초대한 유저</span></div>
            <div id="titleBox"><span>초대받은 매치정보</span></div>
            <div id="titleBox"><span>매칭상태</span></div>
          </div>
          <hr style="height: 1px; background: #ccc;">

          <div class="box_line">
            <% for (var i=0; i < result.length; i++ ) { %>
              <div class="info_box">
                <div class="main_info" style="font-weight: bold;">
                  <span><%= result[i].초대한사람 %></span>
                </div>
                <div id="art_detail">
                  <div>
                    <span style="font-weight: bold;"><%= result[i].제목 %></span>
                  </div>
                  <div>
                    <span>경기 날짜: <%= result[i].경기진행날짜 %> /</span>
                    <span>시간: <%= result[i].경기진행시간 %>:00 </span><br>
                  </div>
                  <div>
                    <span><%= result[i].장소 %> /</span>
                    <span><%= result[i].인원 %> /</span>
                    <span>남은자리: <%= result[i].count %>명</span><br>
                  </div>
                </div>
                <div class="btn_box" style="margin: auto auto;">
                  <% if(result[i].여부==0){ %>
                    <span class="wait">매칭대기중</span>
                  <% } %>
                  <% if(result[i].여부==1){ %>
                    <span class="complete">매칭완료</span>
                  <% } %>
                  <% if(result[i].여부==2){ %>
                    <span class="fail">매칭실패</span>
                  <% } %>
                  <button class="accept_btn accept" data-articlenum_acc="<%= result[i].게시글번호%>">
                    수락
                  </button>
                  <button class="refuse_btn refuse" data-articlenum_ref="<%= result[i].게시글번호%>">
                    거절
                  </button>
                </div>
              </div>
              <% } %>
          </div>
        </div>
      </div>
    </main>

      <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>

      <script>
        $('.accept').click(function (e) {
          var clickarticle = e.target.dataset.articlenum_acc //지금 클릭한것
          var nowClick = $(this); // 지금 이벤트가 동작하는 곳
          console.log(clickarticle);
          $.ajax({
            method: 'PUT',
            url: '/acc_invite',
            data: { accept: clickarticle}
          }).done(function (result) {
            console.log(data);
          }).fail(function (xhr, textStatus, errorThrow) {
            //요청 실패시
            console.log(xhr, textStatus, errorThrow);
          });
        })

        window.onload = function () {
            if (location.href.indexOf('reloaded') == -1) location.replace(location.href + '?reloaded');
        }
      </script>

      <script>
        $('.refuse').click(function (e) {
          var clickarticle = e.target.dataset.articlenum_ref; //지금 클릭한것
          var nowClick = $(this); // 지금 이벤트가 동작하는 곳
          console.log(clickarticle);
          $.ajax({
            method: 'PUT',
            url: '/ref_invite',
            data: { refuse: clickarticle }
          }).done(function (result) {
            console.log(data);
          }).fail(function (xhr, textStatus, errorThrow) {
            //요청 실패시
            console.log(xhr, textStatus, errorThrow);
          });
        })

        window.onload = function () {
            if (location.href.indexOf('reloaded') == -1) location.replace(location.href + '?reloaded');
        }
      </script>
      <ipt src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
        crossorigin="anonymous"></script>

</body>

</html>