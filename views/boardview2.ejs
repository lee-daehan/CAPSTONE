<!doctype html>
<html>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
        integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">

    <title>순풋</title>
    <style>
    @media screen and (max-width: 480px) {
    #header {
      grid-area: header;
    }
    #main {
      grid-area: main;
      display: grid;
      grid-template-rows: auto auto;
      grid-gap: 10px;
    }
    #footer {
      grid-area: footer;
    }

    #body {
      display: grid;
      gap: 10px;
      grid-template-rows: 1fr;
      grid-template-areas: 
        'header'
        'main'
        'footer';
    }

  #nav {
    width: 100%;
  }
  #menubar {
    width: 100%;
  }
  .menubar {
    display: grid;
    grid-template-rows: auto auto auto;
    align-items: center;
    margin: 10px 0;
  }
  .menubar a {
    text-decoration: none;
    color: black;
    font-weight: bold;
    margin: 0 200px;
    display: grid;
    grid-template-rows: auto auto;
    place-items: center;
  }
  .menubar img {
    width: 50px;
    height: 50px;
  }

  .sel-match {
    display: grid;
    grid-template-columns: 5fr 1fr;
    margin: 10px;
    padding: 20px;
  }

  .sel-match:hover {
      background-color: burlywood;
  }

  .sel-match:focus {
      background: burlywood;
      background: linear-gradient(90deg, rgba(255, 0, 168, 0.6643032212885154) 0%, rgba(255, 0, 168, 0.5634628851540616) 30%, rgba(255, 0, 168, 0.19371498599439774) 100%);
      outline: none;
      border: 0;
      border-radius: 10px;
  }
}

@media screen and (min-width: 481px) {
    header {
      width: 100%;
      height: 300px;
      margin: 0;
      padding: 0;
      border: 0;
      display: grid;
      grid-template-rows: auto auto;
    }

    .menubar {
      bottom: 10px;
      display: grid;
      grid-template-columns: auto auto auto auto;
      justify-content: center;
      align-items: center;
      padding: 20px 0;
      margin-bottom: 20px;
      height: 100px;
    }

    .menubar a {
      text-decoration: none;
      color: black;
      font-weight: bold;
      margin: 0 200px;
      display: grid;
      grid-template-rows: auto auto;
      place-items: center;
    }

    .menubar img {
      width: 60px;
      height: 60px;
    }

    .menuname {
      margin-top: 10px;
    }

    main {
      width: 100%;
      margin: 40px auto;
    }

  .sel-match {
    display: grid;
    grid-template-columns: 5fr 1fr;
    margin: 0 auto;
    width: 90%;
    height: 100px;
    /* margin: 0 auto; */
    border: 1px solid #8f9194;
    border-radius: 10px;
    box-shadow: 0 0 3px 0 rgb(172, 170, 170);
    color: black;
  }
  
  .sel-match:hover {
      background-color: rgb(216, 211, 206);
  }

  /* .sel-match:focus {
      background: burlywood;
      background: linear-gradient(90deg, rgba(49, 214, 91, 0.664) 0%, rgba(38, 218, 21, 0.563) 30%, rgba(22, 241, 41, 0.194) 100%);
      outline: none;
      border: 0;
      border-radius: 10px;
  } */
  .invite-button {
    width: 80px;
    height: 40px;
    text-align: center;
    color: white;
    padding: 6px;
    background-color: #5da034;
    border: 0;
    border-radius: 10px;
    box-shadow: 0 0 3px 0 rgb(172, 170, 170);
    font-size: 16px;
    font-weight: bold;
  }
  .main-container{
    width: 90%;
    margin: 0 auto;
    /* border: 1px solid #8f9194; */
    /* border-radius: 10px;
    box-shadow: 0 0 3px 0 rgb(172, 170, 170); */
  }
  .title {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 10px;
  }
  .list-group {
    padding: 10px;
  }
  #btn {
    display: flex;
    justify-content: end;
    align-items: center;
  }
  #info {
    padding: 10px;
  }
  #infotitle {
    font-weight: bold;
  }
  #count {
    font-weight: bold;
    color: #679ae6;
  }
  .main-container2{
    width: 90%;
    margin: 20px auto;

  }
  .sel-match2{
    display: grid;
    grid-template-columns: 4fr 2fr;
    margin: 0 auto;
    width: 90%;
    height: 100px;
    /* margin: 0 auto; */
    border: 1px solid #8f9194;
    border-radius: 10px;
    box-shadow: 0 0 3px 0 rgb(172, 170, 170);
    color: black;
  }
  .invite-button2{
    text-align: center;
    color: white;
    padding: 6px;
    background-color: #5da034;
    border: 0;
    border-radius: 10px;
    box-shadow: 0 0 3px 0 rgb(172, 170, 170);
    font-size: 14px;
    font-weight: bold;
  }
  footer {
      width: 100%;
      height: 300px;
      margin: 0 auto;
      background-color: #282B33;
  }
}
</style>
</head>

<body>
  <% var condition=true;%>
    <header>
        <%- include('nav.html') %>
          <div class="menubar">
            <a href="/board">
              <img src="public/imgs/ball.png" alt="전체 매치">
              <p class="menuname">전체 매치</p>
            </a>
            <a href="/selDate">
              <img src="public/imgs/write.png" alt="매치등록">
              <p class="menuname">매치 등록</p>
            </a>
            <a href="/">
              <img src="public/imgs/notification.png" alt="공지사항">
              <p class="menuname">공지사항</p>
            </a>
          </div>
      </header>
      <hr style="height: 1px; background: #ccc;">
        <main>
            <div class="main-container">
                <h4 class="title"> 초대할 경기를 선택하세요! </h4>
                <% for (var i=0; i < allpost.length; i++ ) { %>
                    <% for (var j=0; j < duplication.length; j++ ) { %>
                      <% if(allpost[i]._id == duplication[j].신청한게시물번호) { %>
                          <% condition = false; %>
                          <% break; %>
                        <% } %>
                  <% } %>
                    
                  <% if(condition == true) { %>
                    <div class="sel-match">
                      <div id="info">
                        <span id="infotitle"><%= allpost[i].제목 %></span><br>
                        <span><%= allpost[i].게시글 %></span><br>
                        <span><%= allpost[i].경기진행날짜 %> / <%= allpost[i].경기진행시간 %> / <%= allpost[i].장소 %> / <%= allpost[i].인원 %> / </span>
                        <span id="count">남은인원 : <%= allpost[i].count %></span>
                      </div>
                      
                      <div id="btn">
                        <a href="/invitedetail" class="invite-button choice"  data-id="<%= allpost[i]._id %>" style="text-decoration: none;">선택</a>
                      </div>
                    </div>
                  <% } %>

                  <% condition = true; %>

                <% } %>
            </div>

            <div class="main-container2">
              <div class="sel-match2">
              <p style="margin-top: 20px;">현재 아래의 게시글들에게 신청이 와있으니 신청받은경기 목록을 확인해주세요</p>
                <% for (var i=0; i < duplication.length; i++ ) { %>
                <div class="sel-match">
                  <div id="info">
                    <span><%= allpost[i].제목 %></span>
                    <span><%= allpost[i].게시글 %></span>
                    <span><%= allpost[i].경기진행날짜 %> / <%= allpost[i].경기진행시간 %> <%= allpost[i].장소 %> / <%= allpost[i].인원 %> /</span>
                  </div>
                </div>
                <% } %>
                  <div id="btn">
                    <button type="submit" style="border: 0;">
                      <a href="/reqmatch" class="invite-button2" style="text-decoration: none;">>신청받은경기 목록 보러가기</a>
                    </button>
                  </div>
                </div>
              </div>
            </div> 
        </main>
        <footer>

        </footer>

        <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>

        <script>
            $('.choice').click(function (e) {
                var postNum = e.target.dataset.id; //지금 클릭한것
                var inv = e.target.dataset.inv; //지금 클릭한것
                console.log(postNum);
                console.log(inv);
                var nowClick = $(this); // 지금 이벤트가 동작하는 곳
                $.ajax({
                    method: 'POST',
                    url: '/invite2',
                    data: { postNum: postNum, inv:inv }
                }).done(function (result) {
                    console.log('성공')
                }).fail(function (xhr, textStatus, errorThrow) {
                    //요청 실패시
                    console.log(xhr, textStatus, errorThrow);
                });
            })

        </script>


        <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
            crossorigin="anonymous"></script>

        <!-- Option 2: Separate Popper and Bootstrap JS -->

        <!-- <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
              integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
              crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
              integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
              crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"
              integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+"
              crossorigin="anonymous"></script> -->

</body>

</html>