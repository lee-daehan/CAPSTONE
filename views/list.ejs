<!doctype html>
<html>

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
  <title>순풋</title>
</head>
<style>
  header {
    width: 100%;
    height: 300px;
    margin: 0;
    padding: 0;
    border: 0;
    display: grid;
    grid-template-rows: auto auto;
  }

  .menubar {
    bottom: 10px;
    display: grid;
    grid-template-columns: auto auto auto auto;
    justify-content: center;
    align-items: center;
    padding: 20px 0;
    margin-bottom: 20px;
    height: 100px;
  }

  .menubar a {
    text-decoration: none;
    color: black;
    font-weight: bold;
    margin: 0 200px;
    display: grid;
    grid-template-rows: auto auto;
    place-items: center;
  }

  .menubar img {
    width: 60px;
    height: 60px;
  }

  .menuname {
    margin-top: 10px;
  }

  main {
    width: 100%;
    margin: 0 auto;
  }

  .container1 {
    display: grid;
    grid-template-columns: 1fr 2fr;
    grid-gap: 10px;
    margin: 10px;
    height: 500px;
  }

  .list-container {
    border: 1px solid #ced4da;
    color: #838589;
    border-radius: 10px;
    box-shadow: 0 0 3px 0 rgb(172, 170, 170);
    /* display: flex; */
    justify-content: center;
    align-items: center;
    font-size: 20px;
    overflow-y: scroll;
  }
  .listContainer-item {
    /* width: 100%; */
    border: 1px solid #ced4da;
    border-radius: 10px;
    padding: 10px;
  }

  .request2 {
    border: 0;
    border-radius: 10px;
    color: white;
    background-color: #5da034;
    font-weight: bold;
    font-size: 17px;
    padding: 10px;
  }

  .recommand-container {
    margin: 10px;
    border: 1px solid #ced4da;
    border-radius: 10px;
    box-shadow: 0 0 3px 0 rgb(172, 170, 170);
  }

  /* .listContainer-item {
    font-size: 24px;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  } */

  footer {
    width: 100%;
    height: 300px;
    margin: 0 auto;
    background-color: #282B33;
  }
</style>

<body>
  <header>
    <%- include('nav.html') %>
      <div class="menubar">
        <a href="/board">
          <img src="public/imgs/ball.png" alt="전체 매치">
          <p class="menuname">전체 매치</p>
        </a>
        <a href="/boardinput">
          <img src="public/imgs/write.png" alt="매치등록">
          <p class="menuname">매치 등록</p>
        </a>
        <a href="/">
          <img src="public/imgs/notification.png" alt="공지사항">
          <p class="menuname">공지사항</p>
        </a>
      </div>
  </header>

  <main>
    <section>
      <div class="container1">
        <%- include('calendar.ejs') %>
          <div class="list-container">
            <% for (var i=0; i < result.length; i++ ) { %>
              <% if(result[i].남은인원===0 ) { %>
              <div class="listContainer-item">
                <p>작성자: <%= result[i].작성자 %></p>
                <p>제목: <%= result[i].제목 %></p>
                <p>게시글: <%= result[i].게시글 %></p>
                <p>장소: <%= result[i].장소 %></p>
                <p>인원: <%= result[i].인원 %></p>
                <p>경기진행날짜: <%= result[i].경기진행날짜 %></p>
                <p>마감되었습니다.</p>
                <button class="request2" onclick="alert('신청되었습니다.')" data-id="<%= result[i].art_id %>">신청</button>
              </div>
              <% } %>
              <% if(result[i].남은인원 != 0 ) { %>
                <div class="listContainer-item">
                  <p>작성자: <%= result[i].작성자 %>
                  </p>
                  <p>제목: <%= result[i].제목 %>
                  </p>
                  <p>게시글: <%= result[i].게시글 %>
                  </p>
                  <p>장소: <%= result[i].장소 %>
                  </p>
                  <p>인원: <%= result[i].인원 %>
                  </p>
                  <p>경기진행날짜: <%= result[i].경기진행날짜 %>
                  </p>
                  <p>남은인원: <%= result[i].남은인원 %>
                  </p>
                  <button class="request2" onclick="alert('신청되었습니다.')" data-id="<%= result[i].art_id %>">신청</button>
                </div>
                <% } %>
            <% } %>
          </div>
      </div>
    </section>

    <section>
      <div class="recommand-container">
        <form action="/recommand" method="POST">
          <h3>성별</h3>
          <input type="radio" id="male" name="gender" value="남성">
          <label for="male">남성</label><br>
          <input type="radio" id="female" name="gender" value="여성">
          <label for="female">여성</label><br>

          <h3>선호포지션</h3>
          <input type="radio" id="FW" name="position" value="FW">
          <label for="FW">FW</label><br>
          <input type="radio" id="MD" name="position" value="MD">
          <label for="MD">MD</label><br>
          <input type="radio" id="DF" name="position" value="DF">
          <label for="DF">DF</label><br>
          <input type="radio" id="GK" name="position" value="GK">
          <label for="GK">GK</label><br>

          <h3>주발</h3>
          <input type="radio" id="left" name="foot" value="왼발">
          <label for="left">왼발</label><br>
          <input type="radio" id="right" name="foot" value="오른발">
          <label for="right">오른발</label><br>
          <input type="radio" id="any" name="foot" value="양발">
          <label for="right">양발</label><br>

          <input type="submit" value="검색하기">

          <!-- <h3>성별</h3>
          <input type="radio" id="male" name="gender" value="남성">
          <label for="male">남성</label><br>
          <input type="radio" id="female" name="gender" value="여성">
          <label for="female">여성</label><br>

          <h3>선호포지션</h3>
          <input type="radio" id="FW" name="position" value="FW">
          <label for="FW">FW</label><br>
          <input type="radio" id="MD" name="position" value="MD">
          <label for="MD">MD</label><br>
          <input type="radio" id="DF" name="position" value="DF">
          <label for="DF">DF</label><br>
          <input type="radio" id="GK" name="position" value="GK">
          <label for="GK">GK</label><br>

          <h3>주발</h3>
          <input type="radio" id="left" name="foot" value="왼발">
          <label for="left">왼발</label><br>
          <input type="radio" id="right" name="foot" value="오른발">
          <label for="right">오른발</label><br>
          <input type="radio" id="any" name="foot" value="양발">
          <label for="right">양발</label><br> -->
        </form>
      </div>
    </section>
  </main>

  <footer>
    푸터
  </footer>

  <script>
    $('.request2').click(function (e) {
      var art_id = e.target.dataset.id; //지금 클릭 게시글의 글 번호
      var nowClick = $(this); // 지금 이벤트가 동작하는 곳
      console.log(art_id);
      $.ajax({
        method: 'PUT',
        url: '/request2',
        data: { _id: art_id }
      }).done(function (result) {
        console.log(data);
      }).fail(function (xhr, textStatus, errorThrow) {
        //요청 실패시
        console.log(xhr, textStatus, errorThrow);
      });
    })

    window.onload = function () {
      if (location.href.indexOf('reloaded') == -1) location.replace(location.href + '?reloaded');
      //if (parent.location.href.indexOf('reloaded')==-1) parent.location.replace(parent.location.href+'?reloaded');
    }

  </script>

  <!-- Optional JavaScript; choose one of the two! -->

  <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
    crossorigin="anonymous"></script>

  <!-- Option 2: Separate Popper and Bootstrap JS -->

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"
    integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
</body>

</html>